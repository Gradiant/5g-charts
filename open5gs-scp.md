---
title: Open5GS with SCP(Service Communication Proxy) 
--- 

# Open5GS with SCP(Service Communication Proxy)

Demo of SCP (Service Communication Proxy) with open5gs.

This setup uses open5gs helm chart version 2.2.0 generated by Gradiant. This chart is packaged and available at Gradiant's DockerHub repo: https://hub.docker.com/u/gradiant


If you want to have the repo in local you can pull it:
```
helm pull oci://registry-1.docker.io/gradiant/open5gs --version 2.2.0
```

# Open5gs Deployment

Service Communication Proxy (SCP) was added in Gradiant's open5gs helm chart version >= 2.2.0, but it is not enabled by default. To use SCP you must enable the SCP service and configure the other NFs to use it.

Take a look to [open5gs-scp-values.yaml](https://gradiant.github.io/5g-charts/docs/open5gs-scp/scp-values.yaml) which overwrite some of the default values of the **Open5gs chart** to enable SCP.

```
helm install open5gs oci://registry-1.docker.io/gradiant/open5gs --version 2.2.0 --values https://gradiant.github.io/5g-charts/docs/open5gs-scp/scp-values.yaml
```

# Verify NFs registration

You can check the NF log to check if it is using SCP to register into the core. 

For example, to get the AMF log, execute the following instruction:

```
kubectl logs deployment/open5gs-amf
```
![open5gs-amf logs](https://raw.githubusercontent.com/Gradiant/5g-charts/gh-pages/docs/open5gs-scp/screenshots/logs-amf.png "open5gs-amf logs")

You can verify the AMF registration in open5gs-nrf logs or just use the nrf API:

```
kubectl exec deployment/open5gs-nrf -- curl -s --http2-prior-knowledge http://open5gs-nrf-sbi:7777/nnrf-nfm/v1/nf-instances?nf-type=AMF
```


![search AMF in NRF](https://raw.githubusercontent.com/Gradiant/5g-charts/gh-pages/docs/open5gs-scp/screenshots/nrf-request.png "search AMF in NRF")


You can also check open5gs-scp to track NF registrations:

```
kubectl logs deployment/open5gs-scp
```

![open5gs-scp logs](https://raw.githubusercontent.com/Gradiant/5g-charts/gh-pages/docs/open5gs-scp/screenshots/logs-scp.png "open5gs-scp logs")


# Enable SCP in other tutorials

You can enable SCP in the rest of the tutorials. Just remember to use chart version >= 2.2.0 add include an additional --values flag with the SCP values when installing open5gs.

For example, the `helm install open5gs` command in the [open5gs-ueransim tutorial](https://gradiant.github.io/5g-charts/open5gs-ueransim-gnb.html) should be:

```
helm install open5gs oci://registry-1.docker.io/gradiant/open5gs --version 2.2.0 \
  --values https://gradiant.github.io/5g-charts/docs/open5gs-ueransim-gnb/5gSA-values.yaml \
  --values https://gradiant.github.io/5g-charts/docs/open5gs-scp/scp-values.yaml
```
