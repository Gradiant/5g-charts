{{- if .Values.hss.enabled }}
{{- $component := .Values.hss | deepCopy }}
{{- $values := merge (dict "Values" $component "component" "hss" "freeDiameter" true) . }}
{{ template "open5gs.deployment" $values }}
---
{{ template "open5gs.configmap" $values }}
---
{{ template "open5gs.diameter-configmap" $values }}
---
{{ template "open5gs.hpa" $values }}
---
{{- range $k, $v := $component.services }}
{{- $_ := set $component "service" $v }}
{{- $values := merge (dict "Values" $component "component" "hss" "service" $k) $ }}
{{ template "open5gs.svc" $values }}
---
{{- end }}
{{- end }}
