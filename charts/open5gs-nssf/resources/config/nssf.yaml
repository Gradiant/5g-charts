{{ $open5gsName := .Release.Name }}
logger:
  level: {{ .Values.config.logLevel }}
parameter: {}

nssf:
  sbi:
    server:
    - dev: "eth0"
      port: {{ .Values.containerPorts.sbi }}
      {{- if .Values.config.sbi.advertise }}
      advertise: "{{ tpl .Values.config.sbi.advertise . }}"
      {{- end }}
    client:
      {{- if .Values.config.nrf.enabled }}
      nrf:
        - uri: {{ default (printf "http://%s:%s" .Values.config.nrf.sbi.hostname .Values.config.nrf.sbi.port) (printf "http://%s-nrf-sbi:7777" $open5gsName) }}
      {{- end }}
      {{- if .Values.config.scp.enabled }}
      scp:
        - uri: {{ default (printf "http://%s:%s" .Values.config.scp.sbi.hostname .Values.config.scp.sbi.port) (printf "http://%s-scp-sbi:7777" $open5gsName) }}
      {{- end }}
      nsi:
        {{- range .Values.config.nsiList }}
        - uri: {{ default (printf "http://%s:%s" .nrf.hostname .nrf.port) (printf "http://%s:7777" $open5gsName) }}
          s_nssai:
            sst: {{ .sst | quote }}
            {{- if .sd }}
            sd: {{ .sd | quote }}
            {{- end }}
        {{- end }}
